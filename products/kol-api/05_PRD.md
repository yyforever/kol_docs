# 05 PRD — kol-api v1

> ⚠️ 状态：占位内容，待深入调研验证。以下内容基于前期调研初步推演，不作为结论。
> 前置文档：[01定位](01_定位与假设.md) → [02场景](02_用户场景.md) → [03能力](03_API能力设计.md) → [04定价](04_定价与商业模式.md)

---

## 产品概述

| 维度 | 内容 |
|------|------|
| **产品名** | 待定（新品牌） |
| **一句话** | 开发者用来构建达人营销产品的数据API |
| **形态** | REST API + MCP Server + Python/Node SDK |
| **定价** | $0/49/149/199+ 月付PLG |
| **目标用户** | 营销Agent开发者、达人营销SaaS构建者、Agency技术团队 |
| **成功标准** | 6个月：30+付费客户、$5K+ MRR |

---

## MVP Scope（v1）

### 必须做（P0）— 上线条件

| # | 功能 | 验收标准 | 工作量估算 |
|---|------|---------|:--------:|
| 1 | **自助注册+API Key** | 邮箱注册→即刻获得Key，无需Sales | 1周 |
| 2 | **达人搜索 `GET /v1/creators`** | 结构化筛选（platform/niche/country/followers/engagement），返回统一Creator对象，响应<2s | 2周 |
| 3 | **AI搜索（自然语言）** | `?q="美妆TikTok达人"` 返回相关结果，基于聚星现有AI能力改造 | 2周 |
| 4 | **达人详情 `GET /v1/creators/{id}`** | 返回完整profile，基础字段免费、高级字段付费 | 1周 |
| 5 | **批量查询 `POST /v1/creators/lookup`** | 按handle/URL/ID批量查询，一次最多100个 | 1周 |
| 6 | **假粉检测 `GET /v1/creators/{id}/authenticity`** | 集成第三方API（Phyllo），返回score+信号 | 1周 |
| 7 | **统一数据模型** | 6平台返回同一Creator结构，字段映射一致 | 2周 |
| 8 | **MCP Server** | 封装为MCP工具，发布到npm+MCP目录 | 1周 |
| 9 | **Python SDK** | `pip install kolapi`，覆盖全部endpoint | 1周 |
| 10 | **交互式文档** | OpenAPI spec + Try It + Quickstart guide | 1周 |
| 11 | **定价+计费** | 4层定价、调用量追踪、超量计费、Stripe集成 | 2周 |
| 12 | **Rate Limit + 防护** | 按tier限流、异常模式检测、`X-RateLimit-*` header | 1周 |

**P0总工作量：约16周（4个月），2-3人全职**

### 上线后迭代（P1）— 第5-6个月

| # | 功能 | 说明 |
|---|------|------|
| 13 | Node SDK | `npm install kolapi` |
| 14 | 受众画像 endpoint | Pro+ |
| 15 | 联系方式 endpoint | Starter+ |
| 16 | 历史合作数据 | Pro+ |
| 17 | Webhooks | 内容发布通知 |
| 18 | CLI工具 | `kolapi search --niche beauty` |
| 19 | 开发者Discord | 社区支持 |

### 远期（P2）— 第7个月+

| # | 功能 |
|---|------|
| 20 | 达人排行榜 API |
| 21 | 相似达人推荐（Lookalike） |
| 22 | 合作报价估算 |
| 23 | AI智能匹配（品牌→达人） |
| 24 | RapidAPI上架 |

---

## 技术架构

```
                    开发者
                   ╱      ╲
              REST API    MCP Server
                   ╲      ╱
                 API Gateway
                (认证/限流/计费)
                      │
              ┌───────┼───────┐
              │       │       │
         搜索服务  详情服务  AI服务
              │       │       │
              └───────┼───────┘
                      │
              聚星数据层（改造）
              ├── 统一数据模型
              ├── 跨平台字段映射
              └── 缓存层
                      │
              聚星现有数据库
              （1亿+达人）
```

### 关键技术决策

| 决策点 | 选择 | 理由 |
|--------|------|------|
| API框架 | FastAPI (Python) 或 NestJS (Node) | 团队决定 |
| 文档 | OpenAPI 3.1 + Redoc/Scalar | 行业标准 |
| 认证 | API Key (header) | 最简单，MCP兼容 |
| 计费 | Stripe Billing | PLG标配 |
| MCP协议 | MCP SDK (TypeScript) | 官方SDK |
| 假粉检测 | v1: Phyllo API集成 → v2: 自研 | 快速上线 |
| 部署 | 独立服务，不依赖聚星主站 | 新品牌独立 |

---

## 上线计划

```
M1 ─── 基础设施
        ├── 统一数据模型设计+实现
        ├── API Gateway搭建（认证/限流/计费）
        └── 注册+API Key发放

M2 ─── 核心Endpoint
        ├── 达人搜索（结构化+AI）
        ├── 达人详情
        └── 批量查询

M3 ─── 增值+包装
        ├── 假粉检测（集成Phyllo）
        ├── MCP Server
        ├── Python SDK
        └── 交互式文档

M4 ─── 上线
        ├── Beta测试（邀请制，20-50开发者）
        ├── 定价+计费上线
        ├── MCP目录上架
        └── 公开发布（HN/PH）

M5-6 ─ 迭代
        ├── P1功能（Node SDK/受众/联系方式/Webhook）
        └── 根据用户反馈调整
```

---

## 团队需求

| 角色 | 人数 | 职责 |
|------|:----:|------|
| 后端工程师 | 2 | API开发、数据模型、Gateway |
| 前端/文档 | 0.5 | 文档站、注册页、Dashboard |
| 产品（兼） | 0.5 | 可由现有PM兼任 |
| **总计** | **3人** | |

**不需要新招**：可从聚星现有团队抽调（研发占比70%，有余力）。需要的是API设计经验，不是LLM专家。

---

## 风险与应对

| 风险 | 概率 | 影响 | 应对 |
|------|:----:|:----:|------|
| 数据质量不满足开发者预期 | 🟡 | 🔴 | Beta阶段收集反馈，针对性补数据 |
| 竞品快速跟进做PLG | 🟡 | 🟡 | 先发优势+DX壁垒+MCP卡位 |
| 假粉检测依赖第三方不稳定 | 🟡 | 🟡 | 多供应商备选 |
| 品牌信任问题 | 🟡 | 🟡 | 新品牌+优质文档+社区口碑 |
| 调用量太低无法覆盖成本 | 🟢 | 🟡 | 边际成本极低，数据已有 |

---

## 待确认清单

| # | 问题 | 需要谁确认 | 阻塞什么 |
|---|------|:--------:|---------|
| 1 | 品牌名 | 杨洋 | 注册域名、文档、SDK包名 |
| 2 | 注册实体（新加坡？） | 杨洋 | Stripe接入、法务 |
| 3 | 团队分配（从聚星抽谁？） | 杨洋+技术负责人 | 开工 |
| 4 | 聚星数据层改造范围确认 | 技术负责人 | M1统一数据模型 |
| 5 | 假粉检测供应商选择 | PM | M3集成 |
| 6 | 定价方案最终确认 | 杨洋 | M4上线 |
